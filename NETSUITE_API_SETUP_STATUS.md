# NetSuite API Setup - Current Status & Next Steps

## Date Started
November 30, 2025

## Goal
Set up automated API integration to replace manual CSV downloads for 3 WOD/IVCS NetSuite reports:
1. **INVALID_CASH_SALE** - "GH | Pending - Invalid Cash Sale Results"
2. **ORDERS_NOT_DOWNLOADING** - "GH | Orders Not Downloading to WMS (Public)"
3. **SO_VS_WEB_DIFFERENCE** - "GHM | SO vs Web Order Difference (Small Differences)"

## Current Status: In Progress - Blocked on Token-Based Authentication Setup

### What We've Discovered

**User Role:** Golden Hippo - GH | Support Administrator

**NetSuite Account ID:** 4450354 (from URL: `https://4450354.app.netsuite.com`)

**Current Setup Menu Structure:**
- Setup → Setup Manager ✓ (visible)
- Setup → Integration → Only shows "Warehouse Switch Request" (no "New Integration" option)
- Setup → Company → Not directly visible in dropdown
- Setup → SuiteCloud → Not directly visible in dropdown

**Search Results:**
- Searching for "Enable Features" → No results found
- Searching for "Token-Based Authentication" → No results found

**What This Means:**
- Token-Based Authentication (TBA) is likely **not enabled** in your NetSuite account
- Your role may not have permissions to enable TBA or create integrations
- The menu structure differs from standard NetSuite documentation

## Next Steps to Try

### Step 1: Check Setup Manager
1. Go to: `Setup → Setup Manager`
2. Look in the left sidebar for:
   - "Company" section
   - "Integration" section
   - "Other Setup" section
3. Click through these sections to find:
   - "Enable Features" or "Company Preferences"
   - "New Integration" or "Manage Integrations"

### Step 2: Check Role Permissions
1. Go to: `Setup → Users/Roles → Roles`
2. Find your role: "Support Administrator"
3. Check if it has:
   - "Integration" permissions
   - "SuiteCloud Platform" permissions
   - Ability to enable features

### Step 3: Contact NetSuite Administrator
If you can't find "Enable Features" or "New Integration", you may need:
- A higher-level administrator to enable Token-Based Authentication
- Additional permissions added to your role
- Access to "Enable Features" page

**Questions to ask your NetSuite admin:**
- "Can you enable Token-Based Authentication for API integrations?"
- "Can you grant me permissions to create Integration records?"
- "Where can I find the 'Enable Features' page in our NetSuite instance?"

## Alternative Approaches (If TBA Not Available)

### Option A: RESTlets (Custom SuiteScript)
- Create custom RESTlet scripts in NetSuite
- Expose API endpoints for your reports
- More flexible but requires SuiteScript knowledge
- **Pros:** Works without TBA, fully customizable
- **Cons:** Requires SuiteScript development

### Option B: Scheduled Scripts
- Create scheduled scripts that export reports to a shared location
- Your application polls that location
- **Pros:** No API setup needed
- **Cons:** Still requires file handling

### Option C: Continue with CSV (Automated Download)
- Keep CSV import functionality
- Add automation to download CSVs from NetSuite (if possible)
- **Pros:** No API changes needed
- **Cons:** Still manual or semi-manual process

## Information Needed (Once TBA is Enabled)

When you're able to proceed, you'll need to gather:

1. **Integration Record:**
   - Token ID (generated by NetSuite)
   - Token Secret (generated by NetSuite - save securely, can't view again!)

2. **Saved Search Internal IDs:**
   - Create saved searches for each of the 3 reports
   - Get the Internal ID of each saved search
   - Report 1: "GH | Pending - Invalid Cash Sale Results API"
   - Report 2: "GH | Orders Not Downloading to WMS API"
   - Report 3: "GHM | SO vs Web Order Difference API"

3. **Account Details:**
   - Account ID: `4450354` ✓ (already have this)
   - Environment: Production (from URL)

## Implementation Plan (Once Unblocked)

1. ✅ Enable Token-Based Authentication
2. ✅ Create Integration Record → Get Token ID & Secret
3. ✅ Create 3 Saved Searches (one per report)
4. ✅ Get Saved Search Internal IDs
5. ✅ Add environment variables to Netlify
6. ✅ Implement API endpoint to fetch from NetSuite
7. ✅ Convert NetSuite JSON response to match current CSV format
8. ✅ Integrate with existing import logic
9. ✅ Test and deploy

## Files Created

- `NETSUITE_API_INTEGRATION_GUIDE.md` - Full setup guide (when TBA is available)
- `NETSUITE_API_SETUP_STATUS.md` - This file (current status)

## Notes

- Your NetSuite instance may have customizations that affect menu structure
- The "Support Administrator" role may need additional permissions
- Consider reaching out to NetSuite support or your account manager if stuck

## When You're Ready to Continue

1. Review this document
2. Try the "Next Steps" above
3. If you get access to "Enable Features" or "New Integration", follow `NETSUITE_API_INTEGRATION_GUIDE.md`
4. If TBA isn't available, we can explore RESTlets or other alternatives

